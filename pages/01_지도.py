import streamlit as st
import pandas as pd
import pydeck as pdk

# ì•± ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="ğŸ‡°ğŸ‡· í•œêµ­ ì¸ê¸° ì—¬í–‰ì§€ TOP 10", page_icon="ğŸ§³", layout="centered")

st.title("ğŸ§³ í•œêµ­ì¸ì´ ì‚¬ë‘í•˜ëŠ” ğŸ‡°ğŸ‡· ì—¬í–‰ì§€ TOP 10")
st.markdown("""
### âœ¨ ì–´ë””ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?
í•œêµ­ì—ì„œ ê°€ì¥ ì‚¬ë‘ë°›ëŠ” ì—¬í–‰ì§€ 10ê³³ì„ ì†Œê°œí•´ìš”!  
ê°ì„± ê°€ë“í•œ ì—¬í–‰ì§€ ì •ë³´ì™€ í•¨ê»˜, ì§€ë„ì—ì„œ ìœ„ì¹˜ë„ í™•ì¸í•´ë³´ì„¸ìš” ğŸ’—
""")

# ì—¬í–‰ì§€ ë°ì´í„° (ìœ„ë„, ê²½ë„, ê°„ë‹¨ ì„¤ëª… í¬í•¨)
travel_data = pd.DataFrame({
    'ì—¬í–‰ì§€': [
        "ì œì£¼ë„ ğŸŒ´", "ë¶€ì‚° í•´ìš´ëŒ€ ğŸŒŠ", "ê²½ì£¼ ì—­ì‚¬ ìœ ì ì§€ ğŸ¯", "ê°•ë¦‰ ê²½í¬ëŒ€ ğŸ–ï¸", "ì„œìš¸ ê²½ë³µê¶ ğŸ°",
        "ì†ì´ˆ ì„¤ì•…ì‚° â›°ï¸", "ì „ì£¼ í•œì˜¥ë§ˆì„ ğŸ¡", "ë‚¨í•´ ë…ì¼ë§ˆì„ ğŸ‡©ğŸ‡ª", "ì–‘ì–‘ ì„œí•‘ í•´ë³€ ğŸ„", "ë‹´ì–‘ ì£½ë…¹ì› ğŸ‹"
    ],
    'ìœ„ë„': [33.4996, 35.1587, 35.8562, 37.7960, 37.5796, 38.1194, 35.8144, 34.8389, 38.0702, 35.3222],
    'ê²½ë„': [126.5312, 129.1604, 129.2247, 128.8889, 126.9770, 128.4656, 127.1532, 128.0604, 128.6282, 126.6930],
    'ì„¤ëª…': [
        "í‘¸ë¥¸ ë°”ë‹¤ì™€ ìì—°ì´ ì–´ìš°ëŸ¬ì§„ ì„¬, êµ­ë‚´ ì—¬í–‰ 1ìˆœìœ„! ğŸŠ",
        "í™œê¸°ì°¬ í•´ë³€ê³¼ ì•¼ê²½ì´ ë§¤ë ¥ì ì¸ ë„ì‹œ ğŸ’™",
        "ì²œë…„ ê³ ë„, ì—­ì‚¬ì™€ ì „í†µì˜ ë‚­ë§Œì´ ìˆëŠ” ë„ì‹œ ğŸ“œ",
        "í•´ë‹ì´ ëª…ì†Œì™€ ê°ì„± ì¹´í˜ê°€ ì–´ìš°ëŸ¬ì§„ ë°”ë‹¤ ë„ì‹œ â˜•",
        "ê³ ê¶ì˜ ê³ ìš”í•¨ ì†ì—ì„œ íë§í•˜ëŠ” ì‹œê°„ ğŸ•Šï¸",
        "ì‚¬ê³„ì ˆ ë‚´ë‚´ ì•„ë¦„ë‹¤ìš´ ì‚°ê³¼ ì¼€ì´ë¸”ì¹´ ğŸŒ„",
        "ì „í†µ í•œì˜¥ì˜ ë©‹ê³¼ ë¨¹ê±°ë¦¬ê°€ í’ë¶€í•œ ë„ì‹œ ğŸ²",
        "ë…ì¼ ê°ì„±ì´ ê°€ë“í•œ ë‚¨ìª½ ë°”ë‹·ë§ˆì„ ğŸ˜ï¸",
        "ì„œí¼ë“¤ì˜ ì²œêµ­! ììœ ë¡œìš´ ë°”ë‹¤ ğŸŒŠ",
        "ëŒ€ë‚˜ë¬´ ìˆ²ê¸¸ì´ íë§ì„ ì„ ë¬¼í•´ìš” ğŸ"
    ]
})

# ì—¬í–‰ì§€ ì„ íƒ
selected = st.selectbox("ğŸ” ê°€ê³  ì‹¶ì€ ì—¬í–‰ì§€ë¥¼ ê³¨ë¼ë³´ì„¸ìš”!", travel_data['ì—¬í–‰ì§€'])

# ì„ íƒí•œ ì—¬í–‰ì§€ ì •ë³´ í‘œì‹œ
row = travel_data[travel_data['ì—¬í–‰ì§€'] == selected].iloc[0]
st.markdown(f"### ğŸ“ {row['ì—¬í–‰ì§€']}")
st.markdown(f"{row['ì„¤ëª…']}")

# ì§€ë„ì— í•€ í‘œì‹œ
st.pydeck_chart(pdk.Deck(
    map_style="mapbox://styles/mapbox/light-v9",
    initial_view_state=pdk.ViewState(
        latitude=row['ìœ„ë„'],
        longitude=row['ê²½ë„'],
        zoom=11,
        pitch=30,
    ),
    layers=[
        pdk.Layer(
            'ScatterplotLayer',
            data=travel_data[travel_data['ì—¬í–‰ì§€'] == selected],
            get_position='[ê²½ë„, ìœ„ë„]',
            get_color='[255, 105, 180, 160]',
            get_radius=500,
        ),
    ],
))

# ì „ì²´ ì§€ë„ ë³´ê¸° ì˜µì…˜
if st.checkbox("ğŸ—ºï¸ TOP 10 ì „ì²´ ì—¬í–‰ì§€ë¥¼ ì§€ë„ì—ì„œ ë³´ê¸°"):
    st.pydeck_chart(pdk.Deck(
        map_style="mapbox://styles/mapbox/light-v9",
        initial_view_state=pdk.ViewState(
            latitude=36.5,
            longitude=127.9,
            zoom=6,
            pitch=0,
        ),
        layers=[
            pdk.Layer(
                'ScatterplotLayer',
                data=travel_data,
                get_position='[ê²½ë„, ìœ„ë„]',
                get_color='[135, 206, 250, 200]',
                get_radius=700,
            ),
        ],
    ))

# ë§ˆë¬´ë¦¬
st.markdown("---")
st.markdown("âœˆï¸ ì–´ë”œ ê°€ë„ ë©‹ì§„ í•œêµ­ ì—¬í–‰ì§€ë“¤! ë‹¹ì‹ ì˜ ë‹¤ìŒ ì—¬í–‰ì€ ì–´ë””ì¸ê°€ìš”? ğŸ’•")
st.caption("Made with â¤ï¸ by ChatGPT")
